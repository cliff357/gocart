<!DOCTYPE html>
<html>
<head>
    <title>Firestore Connection Test</title>
</head>
<body>
    <h1>Firestore Connection Test</h1>
    <button onclick="testRead()">Test Read Products</button>
    <pre id="result"></pre>

    <script type="module">
        import { initializeApp } from 'https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js';
        import { getFirestore, collection, getDocs } from 'https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js';

        const firebaseConfig = {
            apiKey: "AIzaSyAcn8EeoVP11FyRWeS71IaMCw2Z8_VqMXg",
            authDomain: "myloyau.firebaseapp.com",
            projectId: "myloyau",
            storageBucket: "myloyau.firebasestorage.app",
            messagingSenderId: "328569044286",
            appId: "1:328569044286:web:c76c200a93d43b32e1c06f"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);

        window.testRead = async function() {
            const result = document.getElementById('result');
            result.textContent = 'Testing...\n';
            
            try {
                console.log('Attempting to read products collection...');
                const querySnapshot = await getDocs(collection(db, 'products'));
                
                result.textContent += `✅ SUCCESS! Found ${querySnapshot.size} products\n\n`;
                
                querySnapshot.forEach((doc) => {
                    result.textContent += `ID: ${doc.id}\n`;
                    result.textContent += `Data: ${JSON.stringify(doc.data(), null, 2)}\n\n`;
                });
            } catch (error) {
                result.textContent += `❌ ERROR: ${error.code}\n`;
                result.textContent += `Message: ${error.message}\n`;
                console.error('Full error:', error);
            }
        };
    </script>
</body>
</html>
